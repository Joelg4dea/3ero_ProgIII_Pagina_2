<!DOCTYPE html>
<html>

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" type="text/css" href="../estilos.css">
   <TITLE>Mi primer documento HTML</TITLE>
</head>

<body>
   <!-- los HTML se insertan dinamicamente mediante javascript. Ver carpeta JSON para saber la localizacion de los HTML y <Scripts> para la inserción  -->
   <header id="cabecera"><img src="../imagenes/otros/cargando.gif" style="max-height: 30px;text-align:center;display: block;margin-left: auto;margin-right: auto;margin-top: 50px;"></header> 

   <div id="cuerpo">

      <section id="bienvenida">
         <div class="titular_gigante">¡Bienvenido a Lens 4 Gear!</div>

         <div class="mensaje">En nuestra web podés encontrar reseñas y recomendaciones sobre productos/accesorios relacionados a la fotografía.<br><br
            >¡Y También cosas variadas de la comunidad!<br><br><br
            >No te olvides de seguir a la horda
         </div>

         <div id="Redes">
            <ul>
               <a href="https://www.instagram.com/" target="_blank"><li><img src="../imagenes/marcas/instagram_w.png">/Lens4Gear</li></a>
               <a href="https://www.youtube.com/" target="_blank"><li><img src="../imagenes/marcas/YouTube_w.png">/Lens4Gear</li></a>
               <a href="https://www.facebook.com/" target="_blank"><li><img src="../imagenes/marcas/facebook_w.png">/Lens4Gear</li></a>
               <a href="https://www.twitter.com/" target="_blank"><li><img src="../imagenes/marcas/twitter_w.png">@Lens4Gear</li></a>
            </ul>
         </div>
      </section>

      <section id="articulos">
         <span class="titular">Artículos Recientes<img class="icono_de_carga" src="../imagenes/otros/cargando.gif" style="margin-top: 7px;max-height: 30px;float: right;"></span>
      </section>

      <aside>
         <div class="etiquetas"><span id="lateral_titulo"><a class="texto_enlace" href="Etiquetas.html">Etiquetas</a></span><br>
            <ul>
               <li>Samsung
               <li>Apple
               <li>Huawei
               <li>Xiaomi
               <li>Google
               <li>Lenovo
               <li>LG
               <li>Motorola
               <li>Nokia
               <li>Sony
               <li>Asus
               <li>OnePlus
               <li>Meizu
               <li>Canon
               <li>Nikon
               <li>Panasonic
               <li>Olympus
               <li>Leica
               <li>Zeiss
               <li>GoPro
               <li>DJI
               <li>Lomography
               <li>Polaroid
            </ul>
            <div class="ver_mas"><a class="texto_enlace" href="Etiquetas.html">Ver todas..</a></div>
         </div>
    
         <div class="miembros"><span id="lateral_titulo"><a class="texto_enlace" href="miembros.html">Staff</a></span><img class="icono_de_carga" src="../imagenes/otros/cargando.gif" style="margin-right: 0px;max-height: 25px;float: right;">
            <ul>
            </ul>
            <div class="ver_mas"><a class="texto_enlace" href="miembros.html">Ver todos..</a></div>
         </div>
      </aside>

   </div>

   <footer id="pie"><img src="../imagenes/otros/cargando.gif" style="max-height: 30px;display: block;margin-left: auto;margin-right: auto;padding-top: 25px;"></footer>

   <!-- código javascript  -->
   <script src="../scripts/cargas.js"></script>
   <script>
      // función que realiza la inserción de todos los html, de manera asíncrona.
      async function precedimientoAsincrono() {
         // cargar JSON's
         var cabeceras = await leerJSON('https://raw.githubusercontent.com/Joelg4dea/3ero_ProgIII_Pagina_2/main/json/cabeceras.json');
         var pies = await leerJSON('https://raw.githubusercontent.com/Joelg4dea/3ero_ProgIII_Pagina_2/main/json/pies.json');
         var miembros = await leerJSON('https://raw.githubusercontent.com/Joelg4dea/3ero_ProgIII_Pagina_2/main/json/miembros.json');
         var articulos = await leerJSON('https://raw.githubusercontent.com/Joelg4dea/3ero_ProgIII_Pagina_2/main/json/articulos.json');


         // insertar HTML's externos
         // cargado del contenido de la cabecera para insertarlo en <header id="cabecera"> {LO MISMO PARA EL FOOTER}
         reemplazarContenido(cabeceras.normal, "cabecera");
         reemplazarContenido(pies.normal, "pie");


         // insertar lista de artículos de manera dinámica
         // concatenación de todos los artículos en una sola lista
         var articulos = (articulos.accesorios).concat(articulos.camaras).concat(articulos.celulares).concat(articulos.lentes)
         // remoción de la parte más redundante de los elementos, y sorteamiento según fecha (más recientes primero)
         var articulos_url_chica = (articulos.map(function (articulo) { return articulo.replace(/^.*\//, ""); })).sort().reverse();
         // insertado de los articulos más recientes de la lista de articulos (solo 10)
         for (let index_a = 0; index_a < 10; index_a++) {
            for (let index_b = 0; index_b < articulos.length; index_b++) {
               if (articulos[index_b].includes(articulos_url_chica[index_a])) {
                  await insertarContenidoCSS(articulos[index_b], 'div#cuerpo section#articulos');
                  break;
               }
            }
         }
         // quitado del ícono de carga de artículos
         document.querySelector('div#cuerpo section#articulos span.titular img.icono_de_carga').remove();


         // insertar lista de miembros de manera dinámica
         // cargar los miembros desde la lista de miembros (solo 5)
         for (let index = 0; index < 5; index++) {
            await insertarContenidoCSS(miembros.chiquitos[index], 'div.miembros ul');
         }
         // quitado del ícono de carga de miembros
         document.querySelector('div.miembros img.icono_de_carga').remove();
      }

      // Cosas que se hacen MIENTRAS el documento carga..
      document.addEventListener('DOMContentLoaded', function() {
         precedimientoAsincrono();
      });
   </script>
   <!-- código javascript  -->
</body>

</html>